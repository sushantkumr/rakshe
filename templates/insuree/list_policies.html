{% include 'common-header.html' %}
<script type="text/javascript" src="/static/js/vms/insuree/list_policies.js"></script>
<div class="col-sm-9 col-lg-10">
    <br class="hidden-xs">
    <div class="row">
        <div class="col-lg-10 col-md-10 col-sm-10 main-section">
            <div class="giant-holder">
                <p class="mini-giant">Insuree</p>
                <div class="giant-card">
                    <h3>Warranties</h3>
                    <hr>
                    <!-- ko if: policies().length > 0 -->
                    <div style="overflow: auto;">
                        <table class="table table-responsive table-striped table-hover table-bordered">
                            <thead>
                                <tr>
                                    <th>Warranty Number</th>
                                    <th>DApp</th>
                                    <th>Status</th>
                                    <th>Paid</th>
                                    <th>Applied on</th>
                                    <th>Active from</th>
                                    <th>Active till</th>
                                </tr>
                            </thead>
                            <tbody data-bind="foreach: policies">
                                <tr>
                                    <td><a class="clickable" data-bind="attr: {href: '/insuree/policy_details?id=' + id}"><span data-bind="text: 'P' + id.substr(32, 4)"></span></a></td>
                                    <td data-bind="text: dapp_name"></td>
                                    <!-- ko if: status === 'Active' -->
                                    <td class="alert alert-success" data-bind="text: status"></td>
                                    <!-- /ko -->
                                    <!-- ko if: status !== 'Active' -->
                                    <td data-bind="text: status"></td>
                                    <!-- /ko -->
                                    <td data-bind="text: fee_received === true ? 'Yes' : 'No'"></td>
                                    <td data-bind="text: moment(created_at).format('MMM DD YYYY')"></td>
                                    <td data-bind="text: policy_activation_time ? moment(policy_activation_time).format('MMM DD YYYY') : 'Pending'"></td>
                                    <td data-bind="text: policy_termination_time ? moment(policy_termination_time).format('MMM DD YYYY') : 'Pending'"></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- /ko -->
                    <!-- ko if: policies().length === 0 -->
                    <p>No warranties found.</p>
                    <!-- /ko -->
                    <p class="clickable"><a href="/insuree/new_policy">Click here to apply for a new warranty</a>.</p>
                </div>
            </div>
        </div>
{% include 'common-footer.html' %}
